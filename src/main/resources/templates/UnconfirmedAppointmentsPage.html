<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Citas — Aqua Nails</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .glass { background: rgba(255,255,255,0.7); backdrop-filter: blur(6px); }
    </style>
    <script>
        function confirmReject(form) {
            if (confirm("¿Estás seguro de que quieres rechazar esta cita?")) {
                form.submit();
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

<header class="w-full px-6 py-5 flex items-center justify-between bg-white shadow">
    <h1 class="text-2xl font-bold tracking-wide">Aqua <span class="text-green-300">Nails</span></h1>
    <nav class="space-x-6 text-sm font-medium">
        <a href="/home" class="hover:text-green-300">Home</a>
        <a href="/home/citasDisponibles" class="hover:text-green-300">Citas</a>
        <a href="/home/inventario" class="hover:text-green-300">Inventario</a>
    </nav>
</header>

<div th:if="${msgSuccess}" class="bg-green-100 text-green-800 p-2 rounded mb-4">
    <span th:text="${msgSuccess}"></span>
</div>
<div th:if="${msgError}" class="bg-red-100 text-red-800 p-2 rounded mb-4">
    <span th:text="${msgError}"></span>
</div>
<section class="py-12">
    <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-3xl font-bold mb-8 text-center">Citas Pendientes</h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6" th:each="cita : ${citas}">
            <div class="bg-white rounded-2xl shadow-md p-6 flex flex-col justify-between">
                <div>
                    <p class="text-gray-700 mb-1"><strong>Correo del cliente:</strong> <span th:text="${cita.usuario.getEmail()}"></span></p>
                    <p class="text-gray-700 mb-1"><strong>Fecha inicio:</strong> <span th:text="${cita.fecha_inicio.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy HH:mm'))}"></span></p>
                    <p class="text-gray-700 mb-2"><strong>Fecha final:</strong> <span th:text="${cita.fecha_fin.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy HH:mm'))}"></span></p>
                </div>
                <div class="flex flex-col space-y-2 mt-4">

                    <form th:action="@{/admin/resolver}" method="post">
                        <input type="hidden" name="cita_id" th:value="${cita.id}" />
                        <input type="hidden" name="action" th:value="true" />
                        <button type="submit" class="w-full px-4 py-2 bg-green-400 text-white rounded-lg hover:bg-green-500 transition">
                            Aceptar
                        </button>
                    </form>


                    <form th:action="@{/admin/resolver}" method="post" onsubmit="event.preventDefault(); confirmReject(this);">
                        <input type="hidden" name="cita_id" th:value="${cita.id}" />
                        <input type="hidden" name="action" th:value="false" />
                        <button type="submit" class="w-full px-4 py-2 bg-red-400 text-white rounded-lg hover:bg-red-500 transition">
                            Rechazar
                        </button>
                    </form>


                    <form th:action="@{/citas/verImagen}" method="get" target="_blank">
                        <input type="hidden" name="cita_id" th:value="${cita.id}" />
                        <button type="submit" class="w-full px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition">
                            Ver Imagen
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>


</body>
</html>
